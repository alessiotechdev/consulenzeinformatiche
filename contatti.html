<!DOCTYPE html>
<html lang="it" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Offro assistenza informatica, sviluppo siti web e consulenza digitale. Scopri tutti i miei servizi online." />
  <meta name="keywords" content="assistenza pc, sviluppo web, portfolio, consulenza informatica, ripetizioni, servizi digitali" />
  <meta name="author" content="Alessio Napoletano" />
  <meta property="og:title" content="Servizi Informatici e Web" />
  <meta property="og:description" content="Scopri i servizi che offro: assistenza tecnica, realizzazione siti web e altro." />
  <meta property="og:type" content="website" />
  <link rel="icon" href="img/favicon.png" type="image/png" />
  <title>Contatti</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <style>
    :root {
      --bs-primary: #4da3ff;
      --bs-primary-rgb: 77, 163, 255;
      --bs-body-bg: #f8f9fa;
      --bs-body-color: #212529;
      --bs-card-bg: #ffffff;
    }

    [data-bs-theme="dark"] {
      --bs-body-bg: #0d1117;
      --bs-body-color: #e0e0e0;
      --bs-primary: #0d47a1;
      --bs-primary-rgb: 13, 71, 161;
      --bs-secondary-bg: #161b22;
      --bs-card-bg: #1c2128;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      background-color: var(--bs-body-bg);
      color: var(--bs-body-color);
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem;
    }

    .form-container {
      width: 100%;
      max-width: 600px;
    }

    .section-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 1.5rem;
    }

    .form-check {
      margin-bottom: 10px;
    }

    .btn-theme-toggle {
      border: none;
      background: transparent;
      color: white;
      font-size: 1.25rem;
    }

    .btn-theme-toggle:hover {
      color: #ffc107;
    }

    .card {
      background-color: var(--bs-card-bg);
    }

    .form-section {
      transition: transform 0.4s ease;
    }

    .form-section:hover {
      transform: scale(1.02);
    }

    .text-center {
      text-align: center;
    }

    footer {
      background-color: #000;
      color: white;
      text-align: center;
      padding: 12px 1rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-primary navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <i class="bi bi-house-door-fill me-2"></i> Home
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigazione">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="servizi.html">Servizi</a>
          </li>
          <li class="nav-item">
		    <a class="nav-link" href="certificazioni.html">Certificazioni</a></li>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contatti.html">Contatti</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="prezzi.html">Prezzi</a>
          </li>
          <li class="nav-item d-lg-none">
            <button id="toggle-theme-mobile" class="btn btn-link nav-link" type="button">
              <i class="bi bi-moon"></i>
            </button>
          </li>
        </ul>
      </div>

      <button id="toggle-theme" class="btn btn-link d-none d-lg-block text-white ms-3" type="button">
        <i class="bi bi-moon"></i>
      </button>
    </div>
  </nav>

  <main>
    <div class="form-container">
      <h2 class="section-title">Contattami</h2>
      <div class="card p-4 form-section shadow-sm">
        <p>Ti prego di compilare correttamente tutti i campi del form e di inserire un indirizzo email valido, così potrò ricontattarti in modo efficiente.</p>
      </div>
      <br>
      <div class="card p-4 form-section shadow-sm">
        <form id="contact-form">
          <div class="mb-3">
            <label for="name" class="form-label">Nome</label>
            <input type="text" class="form-control" id="name" required />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Motivo del contatto</label>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Assistenza tecnica" id="motivo1" name="motivo">
              <label class="form-check-label" for="motivo1">Assistenza tecnica</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Sviluppo Web" id="motivo2" name="motivo">
              <label class="form-check-label" for="motivo2">Sviluppo Web</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Ripetizioni" id="motivo3" name="motivo">
              <label class="form-check-label" for="motivo3">Ripetizioni</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Altro" id="motivo4" name="motivo">
              <label class="form-check-label" for="motivo4">Altro</label>
            </div>
          </div>
          <div class="mb-3">
            <label for="message" class="form-label">Messaggio</label>
            <textarea class="form-control" id="message" rows="4" placeholder="Scrivi il tuo messaggio qui..." required ></textarea>
          </div>
          <button type="submit" class="btn btn-info">Invia</button>
          <div id="form-response" class="mt-3 text-success"></div>
        </form>
      </div>
      <br>
      <div class="card p-4 form-section shadow-sm text-center">
        <p>Se riscontri dei problemi tecnici o difficoltà con il form, puoi contattarmi direttamente a:</p>
        <p><a href="mailto:alessio.techdev@gmail.com">alessio.techdev@gmail.com</a></p>
      </div>
    </div>
  </main>

  <footer>
    &copy; 2025 – Alessio
  </footer>

  <script>
    // Tema: gestisci toggle e persistenza
    const toggleThemeBtn = document.getElementById('toggle-theme');
    const toggleThemeMobileBtn = document.getElementById('toggle-theme-mobile');
    const htmlEl = document.documentElement;

    function updateThemeIcon(button, theme) {
      const icon = button.querySelector('i');
      if (theme === 'dark') {
        icon.classList.remove('bi-moon');
        icon.classList.add('bi-sun');
      } else {
        icon.classList.remove('bi-sun');
        icon.classList.add('bi-moon');
      }
    }

    function setTheme(theme) {
      htmlEl.setAttribute('data-bs-theme', theme);
      localStorage.setItem('theme', theme);
      updateThemeIcon(toggleThemeBtn, theme);
      updateThemeIcon(toggleThemeMobileBtn, theme);
    }

    function toggleTheme() {
      const currentTheme = htmlEl.getAttribute('data-bs-theme');
      setTheme(currentTheme === 'dark' ? 'light' : 'dark');
    }

    toggleThemeBtn.addEventListener('click', toggleTheme);
    toggleThemeMobileBtn.addEventListener('click', toggleTheme);

    // Inizializza tema da localStorage o default light
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);
  </script>

  <script>
    emailjs.init("NZX2kIwAem_YeB6fz"); // Sostituisci con il tuo User ID pubblico

    const form = document.getElementById('contact-form');
    const messageField = document.getElementById('message');

    // Scrive automaticamente un messaggio in base ai motivi selezionati
    function updateMessage() {
      const name = document.getElementById('name').value.trim();
      const checkboxes = document.querySelectorAll('input[name="motivo"]:checked');
      const motivi = Array.from(checkboxes).map(cb => cb.value);

      const autoMsg = motivi.length > 0
        ? `Salve, sono ${name || '[Nome]'}. Vorrei ricevere maggiori informazioni su: ${motivi.join(', ')}.`
        : '';

      // Solo se il messaggio è vuoto o è ancora quello generato automaticamente
      if (messageField.value === '' || messageField.value === messageField.dataset.autoMessage) {
        messageField.value = autoMsg;
        messageField.dataset.autoMessage = autoMsg;
      }
    }

    // Aggiorna il messaggio automaticamente se cambiano nome o motivi
    form.addEventListener('change', updateMessage);
    form.addEventListener('keyup', () => {
      delete messageField.dataset.autoMessage; // L'utente ha scritto manualmente
    });

    // Gestione invio form
    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const checkboxes = document.querySelectorAll('input[name="motivo"]:checked');
      const motivi = Array.from(checkboxes).map(cb => cb.value).join(', ');

      const templateParams = {
        from_name: document.getElementById('name').value,
        from_email: document.getElementById('email').value,
        motivo: motivi,
        message: messageField.value
      };

      emailjs.send("service_15uanvs", "template_ztn3k3v", templateParams)
        .then(() => {
          document.getElementById('form-response').textContent = 'Messaggio inviato con successo!';
          form.reset();
          messageField.value = '';
          delete messageField.dataset.autoMessage;
        }, (error) => {
          document.getElementById('form-response').textContent = 'Errore nell\'invio del messaggio.';
          console.error(error);
        });
    });
  </script>

</body>
</html>
